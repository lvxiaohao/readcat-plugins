plugin.exports=class a{static ID="wechat_dejian_com";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="默认";static NAME="得间小说";static VERSION="1.0.0";static VERSION_CODE=1;static PLUGIN_FILE_URL="";static BASE_URL="https://wechat.idejian.com";static REQUIRE={};request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:a,nanoid:r}=t;this.request=t,this.store=e,this.cheerio=a,this.nanoid=r}async search(t){var e,t=a.BASE_URL+`/api/wechat/search/do?keyword=${t}&pageSize=100`,t=(await this.request.get(t)).body,r=JSON.parse(t).body.books,o=[];for(e in r){var s=r[e].bookId;o.push({bookname:r[e].bookName,author:r[e].author,coverImageUrl:r[e].picUrl,detailPageUrl:a.BASE_URL+"/api/wechat/book/"+s})}return o}async getDetail(t){var e,t=(await this.request.get(t)).body,t=JSON.parse(t).body,r=t.bookInfo,t=t.newestChapter,o=r.bookId,s=r.bookName,i=r.author,c=r.picUrl,t=t.lastChapter,r=r.desc,h=[],o=a.BASE_URL+"/api/wechat/allcatalog/"+o,o=(await this.request.get(o)).body,n=JSON.parse(o).body.chapterList;for(e in n){var p=n[e].url.replace(".html",""),p=a.BASE_URL+"/api/wechat"+p,l=n[e].name;h.push({title:l,url:p})}return{bookname:s,author:i,coverImageUrl:c,latestChapterTitle:t,intro:r,chapterList:h.flat()}}async getTextContent(t){t=(await this.request.get(t.url)).body,t=JSON.parse(t).body.content;return this.cheerio(t)(".bodytext").contents().toArray().map(({data:t})=>t)}};